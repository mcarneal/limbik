{"ast":null,"code":"var _jsxFileName = \"/home/michael/Development/limbik/limbik_frontend/src/components/home/index.js\";\nimport React, { Component } from 'react';\nimport Table from '../table/index.js';\nimport Search from '../search/index.js';\nimport NewFilter from '../search/filter.js';\nimport Compare from '../compare/index.js';\nimport NavBar from '../navbar/index.js';\nimport Progress from '../progress/index.js';\n\nclass Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      index: [],\n      targetFilter: '',\n      filteredData: [],\n      compareData: [],\n      loaded: false\n    };\n\n    this.onChangeHandler = e => {\n      let searchWord = '';\n      searchWord += e.target.value;\n      let filteredData = this.state.index.filter(post => post.id.toString().includes(searchWord));\n      this.setState({\n        filteredData: filteredData\n      });\n    };\n\n    this.filterChangeHandler = (e, targetProp) => {\n      let filteredData = [];\n      this.state.index.forEach(post => {\n        Object.values(post.targeting).forEach(target => {\n          if (target instanceof Array) target.forEach(value => {\n            if (value === e.target.innerText) {\n              filteredData.push(post);\n            }\n          });\n        });\n      });\n      this.setState({\n        filteredData: filteredData\n      });\n    };\n\n    this.filterHandeler = (e, targetProp) => {\n      let filteredData = [];\n      this.state.index.forEach(post => {\n        if (post.targeting[\"\".concat(targetProp)]) {\n          Object.values(post.targeting[\"\".concat(targetProp)]).forEach(target => {\n            if (target === e.target.innerText || target.includes(e.target.innerText)) {\n              filteredData.push(post);\n            }\n          });\n        }\n      });\n      this.setState({\n        filteredData\n      });\n    };\n\n    this.clearFilterHandeler = () => {\n      this.setState({\n        filteredData: ''\n      });\n    };\n\n    this.compareDataHandeler = id => {\n      let post = this.findPostById(id);\n\n      if (this.state.compareData.includes(post[0])) {\n        let compareData = this.state.compareData.filter(postObj => postObj.id !== post[0].id);\n        this.setState({\n          compareData\n        });\n      } else {\n        this.setState({\n          compareData: [...this.state.compareData, post[0]]\n        });\n      }\n    };\n\n    this.findPostById = id => {\n      let post = this.state.index.filter(postObj => postObj.id === parseInt(id));\n      return post;\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"http://localhost:3000/api/v1/posts\").then(res => res.json()).then(data => {\n      this.setState({\n        index: data\n      });\n    }).then(() => {\n      this.setState({\n        loaded: true\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      onChangeHandler: this.onChangeHandler,\n      searchInput: this.state.search,\n      data: this.state.index,\n      filterHandeler: this.filterHandeler,\n      clearFilterHandeler: this.clearFilterHandeler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Compare, {\n      data: this.state.compareData,\n      removeData: this.compareDataHandeler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), React.createElement(Table, {\n      data: this.state.filteredData.length > 0 ? this.state.filteredData : this.state.index,\n      compareDataHandeler: this.compareDataHandeler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }))), React.createElement(Progress, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Home;","map":{"version":3,"sources":["/home/michael/Development/limbik/limbik_frontend/src/components/home/index.js"],"names":["React","Component","Table","Search","NewFilter","Compare","NavBar","Progress","Home","state","index","targetFilter","filteredData","compareData","loaded","onChangeHandler","e","searchWord","target","value","filter","post","id","toString","includes","setState","filterChangeHandler","targetProp","forEach","Object","values","targeting","Array","innerText","push","filterHandeler","clearFilterHandeler","compareDataHandeler","findPostById","postObj","parseInt","componentDidMount","fetch","then","res","json","data","render","search","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Table from '../table/index.js'\nimport Search from '../search/index.js'\nimport NewFilter from '../search/filter.js'\nimport Compare from '../compare/index.js'\nimport NavBar from '../navbar/index.js'\nimport Progress from '../progress/index.js'\n\nclass Home extends Component {\n\n\n    state = {\n        index : [],\n        targetFilter : '',\n        filteredData : [],\n        compareData : [],\n        loaded : false\n    }\n\n\n    componentDidMount(){\n        fetch(`http://localhost:3000/api/v1/posts`)\n            .then(res => res.json())\n            .then(data => {\n                this.setState({\n                    index : data\n                })\n            } )\n            .then(()=>{\n                this.setState({\n                    loaded : true\n                })            \n            })\n    }\n\n    onChangeHandler = (e) => {\n        let searchWord = ''\n        searchWord += e.target.value\n        let filteredData = this.state.index.filter(post => post.id.toString().includes(searchWord))\n        \n        this.setState({filteredData : filteredData})\n    }\n\n    filterChangeHandler = (e, targetProp) => {\n        let filteredData = []\n        this.state.index.forEach((post)=>{\n            Object.values(post.targeting).forEach((target)=>{\n                if(target instanceof Array)\n                    target.forEach((value)=>{\n                        if(value===e.target.innerText){\n                            filteredData.push(post)\n                        }\n                    })\n            }) \n            \n        })\n        this.setState({filteredData : filteredData})\n    }\n\n    filterHandeler = (e, targetProp) => {\n        let filteredData = []\n        this.state.index.forEach((post)=>{\n            if (post.targeting[`${targetProp}`]){\n                Object.values(post.targeting[`${targetProp}`]).forEach((target)=>{\n                    if(target === e.target.innerText || target.includes(e.target.innerText)){\n                        filteredData.push(post)\n                    }\n                })\n            }\n        })\n        this.setState({filteredData})\n    }\n\n    clearFilterHandeler = () => {\n        this.setState({\n            filteredData : ''\n        })\n    }\n\n    compareDataHandeler = (id) => {\n        let post = this.findPostById(id)\n        if(this.state.compareData.includes(post[0])){\n            let compareData = this.state.compareData.filter(postObj => postObj.id !== post[0].id )\n            this.setState({compareData})\n        }else {\n            this.setState({\n                compareData : [...this.state.compareData, post[0]]\n            })\n        }\n    }\n\n    findPostById = (id) =>{\n        let post = this.state.index.filter(postObj => postObj.id === parseInt(id))\n        return post\n    }\n\n    render(){\n        return(\n            <div>\n                <NavBar\n                    onChangeHandler={this.onChangeHandler}\n                    searchInput={this.state.search}\n                    data={this.state.index}\n                    filterHandeler={this.filterHandeler}\n                    clearFilterHandeler={this.clearFilterHandeler}\n                >\n                    <div className='home'>\n                        <Compare \n                            data={this.state.compareData}\n                            removeData={this.compareDataHandeler}\n                        />\n                        <Table \n                            data={this.state.filteredData.length > 0 ? this.state.filteredData : this.state.index}\n                            compareDataHandeler={this.compareDataHandeler}\n                        />\n                    </div>\n                </NavBar>\n                <Progress/>\n            </div>\n        )\n    }\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}